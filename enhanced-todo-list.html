<!DOCTYPE html>
<html>
<head>
    <title>Enhanced Todo List</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .completed { text-decoration: line-through; color: gray; }
        li { margin: 5px 0; }
        button { margin-left: 10px; }
    </style>
</head>
<body>

    <h2>Enhanced Todo List</h2>

    <input type="text" id="taskInput" placeholder="Enter new task">
    <button id="addBtn">Add Task</button>
    <br><br>

    <input type="text" id="searchInput" placeholder="Search tasks...">
    <br><br>

    <ul id="taskList"></ul>

    <script>
        const taskInput = document.getElementById("taskInput");
        const addBtn = document.getElementById("addBtn");
        const taskList = document.getElementById("taskList");
        const searchInput = document.getElementById("searchInput");

        const STORAGE_KEY = "enhancedTasks";

        let tasks = [];

        
        function loadTasks() {
            const stored = localStorage.getItem(STORAGE_KEY);
            if (stored) {
                tasks = JSON.parse(stored);
                renderTasks(tasks);
            }
        }

        
        function saveTasks() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks));
        }

        
        function renderTasks(list) {
            taskList.innerHTML = "";
            list.forEach(task => {
                const li = document.createElement("li");
                li.textContent = task.text;
                
                if (task.completed) {
                    li.classList.add("completed");
                }

        
                const toggleBtn = document.createElement("button");
                toggleBtn.textContent = task.completed ? "Undo" : "Complete";
                toggleBtn.addEventListener("click", () => {
                    task.completed = !task.completed;
                    saveTasks();
                    renderTasks(tasks);
                });

                
                const deleteBtn = document.createElement("button");
                deleteBtn.textContent = "Delete";
                deleteBtn.addEventListener("click", () => {
                    tasks = tasks.filter(t => t.id !== task.id);
                    saveTasks();
                    renderTasks(tasks);
                });

                li.appendChild(toggleBtn);
                li.appendChild(deleteBtn);
                taskList.appendChild(li);
            });
        }

        addBtn.addEventListener("click", () => {
            const text = taskInput.value.trim();
            if (!text) {
                alert("Task cannot be empty!");
                return;
            }

            const newTask = {
                id: Date.now(),
                text: text,
                completed: false
            };

            tasks.push(newTask);
            saveTasks();
            renderTasks(tasks);

            taskInput.value = "";
        });


        searchInput.addEventListener("input", () => {
            const query = searchInput.value.toLowerCase();
            const filtered = tasks.filter(task =>
                task.text.toLowerCase().includes(query)
            );
            renderTasks(filtered);
        });


        loadTasks();
    </script>

</body>
</html>
